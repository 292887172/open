<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="keywords"
          content="厨电智能系统,屏幕智能电器,53iq,杭州纳帕科技,纳帕科技,智能厨电,智能油烟机,智能冰柜,智能燃气灶,蒸烤箱,微蒸烤,净水器"/>
    <meta name="description"
          content="53iq是世界上合作厂商数最多的厨电智能系统，高可靠性、数十万同类用户验证,提供基于机器学习的厨房智能，快速将油烟机/集成灶、冰箱、洗衣机、蒸烤箱和净水器等智能化。开放合作，让厨房变得更轻松安全。"/>
    <title>厨电智能化体验 -53iq 杭州纳帕</title>

    <link rel="stylesheet"
          href="{% static 'bootstrap/bootstrap.css' %}"/>
    <link href="{% static 'css/home/smartsys_main.css' %}" rel="Stylesheet" type="text/css"/>
    <link rel="stylesheet" href="{% static 'layui/css/layui.css' %}">
    <link href="{% static 'css/home/ex.css' %}" rel="stylesheet">
</head>
<body>
<div class="head">
    <div class="layui-container">
        <div class="topleft">
            <a class="logoa" href="#" target="_self">
                <img src="http://www.53iq.com/static/img/home/130726logo.png"/>
                <span style="display:block; float:left;margin-left: 10px">厨电智能</span>
            </a>
        </div>
        <img class="qr-code-img" hidden="hidden" src="http://www.53iq.com/static/img/home/qrcode.jpg">
        <div class="topright">
            <ul class="topmain">
                {% if user.account_id %}
                    <li style="margin-right: 8px">{{ user.account_id }}</li>
                {% else %}
                    <li><a href="/center/login?next=/ex">登录</a></li>
                {% endif %}
                <li>|</li>
                <li><a class="weixin">官方微信</a></li>
                <li>|</li>
                <li><a class="support" href="http://www.53iq.com/support">技术支持</a></li>
                <li>|</li>
                <li><a class="ui-about" href="http://www.53iq.com/about">关于</a></li>
                <li><a>&nbsp<span style="font-size:18px; font-weight:bold;color: #333">400-668-6870</span></a></li>
            </ul>
        </div>
    </div>
</div>
<div class="content">
    <div class="upper">
        <div class="u-left">
            <div class="title">
                智能屏厨电体验
            </div>
            <div class="txt">
                简单、快捷
            </div>
            <div class="btn-area">
                <button class="layui-btn" onclick="download()">
                    {% if user.account_id %}
                        下载体验智能屏
                    {% else %}
                        申请体验智能屏
                    {% endif %}
                </button>
            </div>
            {% if not user.account_id %}
                <a href="?page=desc" style="margin-right: 20px">智能屏典型案例 ></a>
            {% endif %}
            <a>如何快速体验？ ></a>
        </div>
        <div class="u-right">
            <img src="{% static 'image/home/ex/1.jpg' %}">
        </div>
    </div>
    <div class="down layui-container">
        <div class="layui-row">
            <div class="layui-col-md3 layui-col-lg3 row1">
                <div class="d-title">我的厨电<span>+</span></div>
                <div class="d-txt d-active" data-type="zkx"><span>蒸烤箱</span></div>
                <div class="d-txt" data-type="xwj"><span>洗碗机</span></div>
                <div class="d-txt" data-type="yyj"><span>油烟机 集成灶</span></div>
                <div class="d-txt" data-type="others"><span>其他厨电</span></div>
            </div>
            <div class="layui-col-md3 layui-col-lg3 row2">
                <div class="d-title">WiFi屏规格<span>→</span></div>
                <div class="d-txt size-43 d-active" data-size="4.3"><span>4.3寸</span><img
                        src="{% static 'image/home/ex/4.3.jpg' %}"></div>
                <div class="d-txt size-5" data-size="5"><span>5寸</span><img src="{% static 'image/home/ex/5.jpg' %}">
                </div>
                <div class="d-txt size-68" data-size="6.8"><span>6.8寸</span><img
                        src="{% static 'image/home/ex/6.8.jpg' %}"></div>
                <div class="d-txt size-7" data-size="7" style="display: none"><span>7寸</span><img
                        src="{% static 'image/home/ex/7.jpg' %}"></div>
            </div>
            <div class="layui-col-md4 layui-col-lg4 row3">
                <div class="d-title">我的智能屏厨电</div>
                <div class="d-img-l">
                    <img src="{% static 'image/home/ex/zkx_4.3.jpg' %}">
                </div>
                <div class="d-txt my-name" style="padding: 15px 0">4.3寸智能屏蒸烤箱</div>
            </div>
            <div class="layui-col-md2 layui-col-lg2 row4">
                {#            <div class="d-title">方案接入条件</div>#}
                {#            <a class="d-txt" onclick="jump()"><span class="my-size">4.3</span>寸屏结构要求 ></a>#}
                {#            <a class="d-txt" onclick="$('.dkb-demand').show()">电控板要求 ></a>#}
                {#            <div class="d-txt dkb-demand" style="display: none">供电电压5V 2A，一路TTL串口</div>#}
                <div class="btn-area" style="margin-top: 50%" onclick="next()">
                    <button class="layui-btn">下一步方案评估</button>
                </div>
            </div>
        </div>
    </div>
    <div class="evaluate">
        <div class="layui-row">
            <div class="layui-col-md6 layui-col-lg6">
                <div class="eva-title">评估你的智能方案</div>
                <div class="eva-form">
                    <div>
                        <span class="span1">电源板</span>
                        <span class="span2">现有厨电电源板的信息</span>
                    </div>
                    <div style="padding-top: 25px">
                        供电电压：<input type="number" title="电压" id="v">V
                        <input type="number" title="电流" id="a">A
                    </div>
                    <div class="layui-form">
                        <div class="layui-form-item">
                            <label class="layui-form-label">通信方式：</label>
                            <div class="layui-input-inline">
                                <select title="通信方式">
                                    <option value="TTL" selected>TTL</option>
                                    <option value="other">其它</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md6 layui-col-lg6">
                <div class="eva-title">&nbsp;</div>
                <div class="eva-form" style="border: none">
                    <div>
                        <span class="span1">厨电结构</span>
                        <span class="span2">可放置WiFi屏的结构空间</span>
                    </div>
                    <div class="long-input">
                        长：<input type="number" title="长" id="long">
                        宽：<input type="number" title="宽" id="tall">
                        厚：<input type="number" title="厚" id="thick">mm
                    </div>
                    <div>
                        <img style="margin: 0" src="{% static 'image/home/ex/room.png' %}">
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-row" style="padding-top: 0">
            <div class="eva-result" style="display: none">评估结果：<span style="color: #f46b64"></span></div>
            <div class="btn-area" style="text-align: center;">
                <button class="layui-btn eva-btn">立即评估</button>
                <div class="after-eva" style="display: none">
                    <button class="layui-btn reset">重新评估</button>
                    <button class="layui-btn ins">立即开发</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="plan-service">
    <div class="phoneNumber"><p>0571-88868856</p></div>
    <a>
        <i><img src="http://storage.56iq.net/group1/M00/46/68/CgoKQ1tYHcSAabUJAAAHuocUmgA407.png" alt=""></i>
        <p>电话咨询</p>
    </a>
</div>
<div id="myModal" class="modal">
    <div class="modal-body">
        <div class="ui-factory">
            <img src="http://www.53iq.com/static/img/home/kitchen/oven2.jpg">
            <span title="关闭" class="myclose" onclick="$('#myModal').modal('hide');">×</span>
        </div>
        <p style="margin-top: 15px;font-size: 15px;text-align: center;width: 270px;margin-left: 32px">
            填写您希望进行智能化的厨电，我们将尽快联络您</p>
        <div style="padding: 0 20px">
            <input type="text" class="form-control" id="txtProduct" placeholder="您的产品"/>
            <input type="text" class="form-control" id="txtEmail" placeholder="您的邮箱"/>
            <input type="text" class="form-control" placeholder="手机" name="" id="txtPhone"/>
            <input type="button" id="btnConfirm" class="btn btn-primary" value="立即登记"/>
            <img src="http://www.53iq.com/static/img/loading.gif" width="20" height="20" id="loading"
                 style="display:none;"/>
            <p class="label1 label-danger1" id="lbMessage"></p>
        </div>
    </div>
</div>
<div class="footer">
    <p>
        <a href="http://www.53iq.com/about">关于我们</a><span>•</span>
        <a href="http://www.53iq.com/support">服务支持</a><span>•</span>
        <a href="http://www.53iq.com/dev">开发文档</a><span></span>
    </p>
    <p style="margin-top: 10px;">Copyright © {% now 'Y' %} 纳帕科技 版权所有</p>
    <a name="chaper" class="ui-scroll-top" href="javascript:scroll(0,0);"><img
            src="http://www.53iq.com/static/img/zhid2.png"
            title="回到顶部"/></a>
</div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="{% static 'bootstrap/bootstrap.js' %}"></script>
<script type="text/javascript" src="{% static 'layui/layui.js' %}"></script>
<script>
    let type = "zkx";
    let size = "4.3";
    let weixin = $(".weixin");
    let login = false;
    {% if user.account_id %}
        login = true;
        let account = "{{ user.account_id }}";
    {% endif %}
    weixin.bind("mouseover", function () {
        $(".qr-code-img").show()
    });
    weixin.bind("mouseout", function () {
        $(".qr-code-img").hide()
    });
    // 加载layui的form模块
    layui.use(['form'], function () {
    });

    let plan_service = $(".plan-service");
    plan_service.bind("mouseover", function () {
        $(this).addClass("plan-active");
    });
    plan_service.bind("mouseout", function () {
        $(this).removeClass("plan-active");
    });

    $(".d-txt").bind("click", function () {
        if ($(this).data("type") !== "others") {
            if ($(this).data("type") || $(this).data("size")) {
                $(this).siblings().removeClass("d-active");
                $(this).addClass("d-active");
                type = $(".row1 .d-active").data("type");
            }
        } else {
            $('#myModal').modal({show: true});
        }
        size = $(".row2 .d-active").data("size").toString();

        // 蒸烤箱没有7寸
        if (type === "zkx") {
            $(".size-7").removeClass("d-active").hide();
            if (size === '7') {
                $(".size-43").addClass("d-active");
                size = "4.3";
                setImg();
            }
        } else {
            $(".size-7").show();
        }

        // 油烟机没有4.3寸
        if (type === "yyj") {
            $(".size-43").removeClass("d-active").hide();
            if (size === '4.3') {
                $(".size-5").addClass("d-active");
                size = '5';
                setImg();
            }
        } else {
            $(".size-43").show();
        }

        setImg();
    });

    $("#btnConfirm").click(function () {
        var product = $("#txtProduct").val();
        var email = $("#txtEmail").val();
        var phone = $("#txtPhone").val();
        if (!/^[0-9a-zA-Z]+\@[A-Za-z0-9]+\.[A-Za-z0-9]+$/gi.test(email)) {
            msg("请输入正确的邮箱！");
            return false;
        }
        if (!/^[0-9\-]{4,13}$/gi.test(phone)) {
            msg("请输入正确的电话号码！");
            return false;
        }
        if (product == '' || product == '您的产品') {
            msg("请填写您的产品名称或类型！");
            return false;
        }
        $.ajax({
            url: location.href,
            type: "POST",
            data: {"action": "enroll", "email": email, "phone": phone, 'product': product, 'demand': '无'},
            beforeSend: function () {
                $("#loading").show();
            },
            success: function (res) {
                if (res === "ok") {
                    layui.use(['layer'], function () {
                        let layer = layui.layer;
                        layer.open({
                            title: '提示',
                            content: '我们已收到你的登记信息，将尽快与你取得联系！',
                            success: function () {
                                $('#myModal').modal('hide');
                            }
                        });
                    });
                }
                else {
                    msg("登记失败！");
                }
                $("#loading").hide();
            },
            error: function (res) {
                $("#loading").hide();
            }
        })
    });

    $(".ins").bind("click", function () {
        location.href = "/center/login?next=/ex";
    });

    $(".reset").bind("click", function () {
        $(".eva-result").hide();
        $(".eva-btn").show();
        $(".after-eva").hide();
    });

    $(".eva-btn").bind("click", function () {
        let v = parseFloat($("#v").val().trim());
        let a = parseFloat($("#a").val().trim());
        let commu = $(".layui-input-inline select").val();
        let long = parseFloat($("#long").val().trim());
        let tall = parseFloat($("#tall").val().trim());
        let thick = parseFloat($("#thick").val().trim());
        let result = '';
        if ((v !== 5 || a !== 2) && commu === 'TTL') {
            result += "由于供电未采用5V2A，电源板需要重新改造，";
        } else if ((v !== 5 || a !== 2) && commu !== 'TTL') {
            result += "由于供电未采用5V2A，通信方式未采用TTL串，电源板需要重新改造，";
        } else if ((v === 5 && a === 2) && commu !== 'TTL') {
            result += "由于通信方式未采用TTL串，电源板需要重新改造，";
        } else {
        }
        result += '结构尺寸适合：' + calc(long, tall, thick);
        showResult(result);

        if (login) {
            // 把已登录用户的评估结果记录下来
            $.post(location.href, {
                action: "evaluate",
                data: JSON.stringify({
                    v: v,
                    a: a,
                    commu: commu,
                    long: long,
                    tall: tall,
                    thick: thick,
                    result: result,
                    account: account
                })
            }, function (res) {
                console.log(res);
            })
        }

        function showResult(msg) {
            $(".eva-result").show().find("span").text(msg);
            $(".eva-btn").hide();
            $(".after-eva").show();
        }

        function calc(a, b, c) {
            /*
            4.3寸：121.9*74.7*14.3
            5寸：143.7*81*16.4
            6.8寸：198.8*66.6*16.8
            7寸：188.9*105.2*17
             */
            let arr = [];
            if (a > 121.9 && b > 74.7 && c > 14.3) arr.push("4.3寸");
            if (a > 143.7 && b > 81 && c > 16.4) arr.push("5寸");
            if (a > 198.8 && b > 66.6 && c > 16.8) arr.push("6.8寸");
            if (a > 188.9 && b > 105.2 && c > 17) arr.push("7寸");

            if (arr.length) {
                return arr.join("、");
            } else {
                return '暂无';
            }
        }
    });

    function msg(val) {
        $("#lbMessage").text(val).show().fadeOut(4000);
    }

    function setImg() {
        // 设置智能厨电方案的图片
        let filename = type + "_" + size + ".jpg";
        $(".d-img-l img").attr("src", "{% static 'image/home/ex/' %}" + filename);
        $(".my-size").text(size);
        $(".my-name").text(size + "寸智能屏" + $(".row1 .d-active span").text());
    }

    function jump() {
        open("{% static 'image/home/ex/' %}" + size + "-model.jpg");
    }

    function download() {
        if (login) {

        } else {
            $('#myModal').modal({show: true});
        }
    }

    function next() {
        if (login) {

        } else {
            $('#myModal').modal({show: true});
        }
    }
</script>
</html>
