{% extends "home/base.tpl" %}
{% load filter %}
{% load staticfiles %}

{% block title %}
    产品管理
{% endblock %}
{% block style %}
    <link rel="stylesheet" href="{% static 'common/css/app.css' %}" xmlns="http://www.w3.org/1999/html"/>
    <link rel="stylesheet" href="{% static 'common/css/font-awesome.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/product/list.css' %}"/>
    <style>
        .wrapper {
            padding: 0;
            margin: 0 auto;

        }

        .wrapper2 {
            max-width: 1300px;
        }

        .mt20 {
            margin-top: 5px;
        }

        .goods span {
            height: 30px;
        }

        .nav > li > a:hover {
            background: transparent;
        }

        .footer {
            margin: 100px auto 0;
        }

        .title-sub {
            height: 0px;
        }

        .title-sub {
            padding: 36px 0;
        }

        .set-radius {
            background-color: #333;
            border: 1px solid #333;
            text-align: center;
            height: 30px;
            width: 30px;
            float: left;
            margin: 9px 18px;
            border-radius: 50%;
            -moz-border-radius: 50%;
            -webkit-border-radius: 50%;
            line-height: 28px;
        }

        .set-create {
            background-color: #ff6202;
            border: 1px solid #ff6202;
            text-align: center;
            margin: 18px;
            height: 31px;
            width: 85px;
            color: #fff;
            border-radius: 12px;

        }

        .set-create:active {
            opacity: 0.85;
        }

        .set-float {
            top: 32px;
            position: relative;
            float: left;
            color: #fff;
        }

        .right {
            float: right;
            width: 33%;
            height: 300px;
            padding-top: 4%;
            padding-left: 2%;
        }

        .left div {
            float: right;
            padding: 3px;
            width: 218px;
            height: 254px;

        }

        .left-dv1 {
            background: rgba(47, 170, 116, .7);
            transform: skewX(-1deg);
            margin-top: 35px;
            margin-left: -2px;
        }

        .left-dv2 {
            background: rgba(255, 98, 2, .7);
            transform: skewX(-1deg);
            margin-top: 20px;
            margin-left: -2px;
        }

        .left-dv3 {
            background: rgba(110, 169, 248, .7);
            transform: skewX(-1deg);
            margin-top: 35px;
        }

        .left div.left-dv4 {
            width: 110px;
            background: rgba(110, 169, 248, .7);
            transform: skewX(-1deg);
            margin-top: 179px;
            height: 110px;
            cursor: pointer;
        }

        .left-dv4:hover {
            opacity: 0.85;
        }

        .left div img {
            top: 14px;
            position: relative;
            left: 29%;
        }

        .set-sample {
            border: 1px solid #999;
            height: 30px;
            width: 100px;
            top: 31px;
            left: 20%;
        }

        .set-sample span {
            margin: 25px;
            font-size: 16px;
        }

        .nav-current {
            text-decoration: none;
            border-bottom: 3px solid #ff6202;
            height: 35px;
        }

        .index-banner {
            min-width: 1200px;
        }

        .left {
            float: left;
            width: 66%;
            margin-left: 10px;
            height: 300px;
            min-width: 810px;
            max-width: 1050px;

        }

        .left h4 {
            text-align: center;
            margin-top: 12px;
            margin-bottom: 10px;
            color: #fff;
        }

        .left p {
            color: #fff;
            padding: 10px;
            font-size: 12px;
        }
        .goods-list{
            width: 346px;
            height: 186px;
            padding: 14px;
            margin-right: 36px;
        }
        .goods-list dl dt {
            width: auto;
            height: auto;
        }

        .goods-list dl dd {
            margin-left: 96px;
            padding-top: 6px;
        }

        .goods-list dl dt img {
            width: 70px;
            height: 75px;
            margin-top: 8px;
        }

        .goods-list dl dd .goods-title {
            margin: 0;
        }

        .self-button {
            float: left;
            margin-left: -43%;
            margin-top: 20%;
        }

        .product-info-p {
            float: left;
            width: 81%;
        }

        .goods-list dl dd.ui-control {
            padding-top: 97px;
            margin-left: 0;
        }

        .ui-product-action {
            float: left;
            width: 50%;
            text-align: center;
        }

        .product-info-div {
            margin-top: 5px;
        }

        .left div.ui-demo {
            cursor: pointer;
            border: 1px solid #fff;
            color: #fff;
            height: 30px;
            width: 100px;
            margin-top: 22px;
            margin-left: 55px;
            float: left;
            text-align: center;
            line-height: 22px
        }

        .ui-demo:hover {
            background-color: #c3c8d1;
        }

        @media screen and (max-width: 1200px) {
            .index-banner {
                background-image: url("{% static 'image/product/banner_bg.jpg' %}");
                background-size: 100%;
                height: 300px;
            }

            .right {
                max-width: 300px;
                min-width: 330px;
            }
        }

        @media screen and (min-width: 1201px) {
            .index-banner {
                background-image: url("{% static 'image/product/banner_bg.jpg' %}");

                background-size: 100%;
                height: 300px;
            }
        }

        @media screen and (min-width: 1800px) {
            .index-banner {
                background-image: url("{% static 'image/product/banner_bg.jpg' %}");

                background-size: 70%;
                height: 300px;
            }
        }

        .btn-blue {
            background: #2faa74;
        }

        .btn-blue:hover {
            background: #59B784;
        }

        .progress {
            width: 350px;

            margin: auto;
            height: 43px;
            overflow: visible;
            background-color: #fff;
            border-radius: 0;
            position: relative;

        }
         .btn-default, .btn-default.focus, .btn-default:focus {
            color: #333 !important;
            background-color: #dddddd !important;
        }
        .btn-default:hover{
            color: #333 !important;
            background-color: #c6c6c6 !important;
        }
        .btn-primary, .btn-primary.focus, .btn-primary:focus {
            color: #fff !important;
            background-color: #ff6f37 !important;
                border-color: coral;
        }
        .btn.btn-primary:hover{
            color: #fff !important;
            background-color: #ff6202 !important;
            border-color: #ff6202 !important;
        }
        .progress li {
            text-align: center;
            font-size: 14px;
            color: #B6B6B6;
            float: left;
            width: 75px;
        }

        .progress li a:hover {
            color: #2980b9;
            text-decoration: none;
        }
        .progress li.cur {
            color: #626262;
        }

        .progress li span {
            display: block;
            margin: auto;
            padding-top: 12px;
            margin-bottom: 10px;
            width: 25px;
            height: 25px;
            background: #d6dae0;
            border-radius: 50%;

            margin-top: -23px;
            margin-left: -3px;
        }

        .progress li.cur span {
            background: rgba(75, 141, 229, 0.3);
        }

        .progress li span i {
            display: block;
            margin: auto;
            width: 25px;
            height: 25px;
            color: white;
            font-size: 15px;
            line-height: 1px;
            border-radius: 50%;
        }

        .progress li.cur span i {
            background: #4b8de5;
        }

        .progress li.prog_a {
            position: relative;
            left: 0;
            top: 0;
        }

        .progress li.prog_c {
            position: relative;
            left: -10px;
            top: 0;
        }

        .progress li.prog_d {
            position: relative;
            left: -45px;
            top: 0;
            float: right;
        }
        .goods-title a:hover {
            text-decoration: none;
        }
        .goods-list dl dd p{
            width: 100%;
        }
        .modal{
                text-align: center;
        }
        .modal:before {
            display: inline-block;
            vertical-align: middle;
            content: " ";
            height: 100%;
        }
         .modal-dialog {
            display: inline-block;
            text-align: left;
            vertical-align: middle;
        }
    .arrow{
        transform: rotate(45deg);
        background: #fff;
        left: 56%;
        margin-top: -5px;
        border-top: 1px solid;
        border-left: 1px solid;
    }
    .parcode{
        top: 56%;
        border: 1px solid #ccc;
        width: 168px;
        height: 184px;
        margin-left: 37px;
        z-index: 1000;
        background-color: #fff;
        border-radius: 4px;
        display: none;
        position: absolute;

    }
    </style>
{% endblock %}
{% block menu %}
    {% create_menu 2 user.developer.developer_id %}

{% endblock %}
{% block content %}
    <div class="index-banner">
    <div class="left">

    {% for app in default_apps %}

        {% if  forloop.counter == 1 %}
            <div class="left-dv4" data-url="{% url 'product/main' %}?ID={{ app.app_id }}#/demo/{{ app.app_name }}">
                <img style="width: 45px" src="{% static 'image/product/demo.png' %}">
                <h4 style="margin-top: 28px">体验中心</h4>

            </div>
            <div class="left-dv1">
        {% elif forloop.counter == 2 %}
            <div class="left-dv2">
        {% else %}
            <div class="left-dv3">
        {% endif %}

    <img src="{{ app.app_logo }}">
    <h4>{{ app.app_name }}</h4>
    {% if app.app_device_type == 1 %}
        <p>智能显示，多档控制，强劲风力，多屏互动体验</p>
    {% elif app.app_device_type == 2 %}
        <p>WiFi/Android屏集成灶，远程监控灶状态，厨房风险指数模板快速接入</p>
    {% elif app.app_device_type == 11 %}
        <p>标准化蒸烤箱模板，3步快速接入，支持海量一键云菜谱</p>
    {% endif %}
    <div class="ui-demo">
        <a style="display:block;color:#fff" href="javascript:void(create_procuct('{{ app.app_device_type }}'))">快速创建</a>
    </div>
    </div>
    {% endfor %}


</div>
<div class="right">
    <h3 style="font-size: 21px;color: #fff"><b>3步 实现智能厨电开发</b></h3><br>
    <div class="set-float">
        <img src="/static/image/product/20180904-2.png">
        <p>定义全新产品 ➝ </p>
        <div class="set-radius"><span>1</span></div>
    </div>
    <div class="set-float">
        <img src="/static/image/product/20180904-4.png" style="padding-left: 20px;">
        <p>协议自助调试 ➝ </p>
        <div class="set-radius" style="margin-left: 34px;"><span>2</span></div>
    </div>
    <div class="set-float">
        <img style="margin-left: 20px" src="/static/image/product/20180904-1.png">
        <p>自定义UI界面</p>
        <div style="margin-left: 34px" class="set-radius"><span>3</span></div>
    </div>
</div>
</div>

    <div class="wrapper mt20">
    <div class="popBox" id="newHtmlBox" style="display: none;">
        <a href="javascript:" onclick="new_close()" class="close">关闭</a>
        <h3 style="text-align: center;">创建<span id="productType"></span>类产品</h3>
        <div class="cont mt20" style="margin-top: -15px;">
            <div style="float:left;">
                <img id="show_logo" style="width: 110px;height: 120px;margin:0 0 0 -3%;"
                     src="http://storage.56iq.net/group1/M00/1D/0C/CgoKQ1m3oSmAbhKvAAALicfeZeI743.png">
            </div>
            <div class="warnCont" style="width: 76%">
                <form name="formProduct" method="post" class="fd7_create_product-form" action="/product/add/">
                    <div class="ant-row ant-form-item">
                        <label for="product_name" class="">产品名称:</label>
                        <span class="ant-input-wrapper">
                            <input type="text" value="" id="product_name" onblur="check_name()" name="product_name"
                                   class="ant-input ant-input-lg">
                        </span>
                        <div id="productName" style="color: #f50;font-size: 12px;padding-left: 76px"></div>
                    </div>
                    <div class="ant-row ant-form-item" id="com_type">
                        <label class="dtbox">技术方案:</label>

                        <p style="float: right;width: 75%"><input class="magic-radio" type="radio" onclick="select_progm(2)" name="select_group" id="c1" checked>
                            <label for="c1">Wi-Fi</label>
                            <input class="magic-radio" type="radio" name="select_group" onclick="select_progm(1)" id="c2" >
                            <label for="c2">Android屏</label>
                        </p>

                        <div  class="select-progm1" style="font-size: 12px;color: #2980b9;">WiFi方案要求设备支持5V供电，两路串口，适用于集成灶，油烟机</div>
                    </div>

                    <div class="ant-row ant-form-item">
                        <label for="product_name" class="">产品类型:</label>
                        <span class="ant-input-wrapper">厨房类
                            <input type="hidden" value="厨房类" readonly="readonly" name="product_category"
                                   class="ant-input ant-input-lg">
                        </span>
                    </div>
                    <input type="hidden" value="" id="product_category_detail" name="product_category_detail" class="">
                    <input type="hidden" value="{{ developer.developer_id }}" name="developer_id">
                    <input type="hidden" value="2" name="product_group" class="product_group">
                    <input type="hidden" value="是" name="product_command">

                </form>
            </div>
        </div>
        <div class="btnBar" style="background: none;height: 85px;">
              <span>
                <a href="javascript:" onclick="submit_product()" id="productSubmit" class="btn-blue"
                   style="background: #ff6202;">提交</a>
              </span>
        </div>
    </div>
    <div class="title-sub"><span class="old">我的产品</span>
        <div class="col-lg-9 col-md-9 col-sm-9" style="margin-top: -7px;text-align: right">
            <a href="{% url "product/add" %}" class="btn btn-s-lg btn-success">
                <i class="fa fa-plus"></i>
                <span class="text">创建产品</span>
            </a>
        </div>
    </div>
    <div id="loadingDiv" style="position:absolute;left:45%;width:100%;top:40%;background:#f3f8ff;opacity:0.8;filter:alpha(opacity=80);z-index:10000;display: none"><div style="position: absolute; cursor1: wait; width: auto; height: 57px; line-height: 57px; padding-left: 50px; padding-right: 5px; background: #fff url(/static/image/product/loading.gif) no-repeat scroll 5px 10px; border: 2px solid #95B8E7; color: #696969; font-family:\'Microsoft YaHei\';">页面加载中，请等待...</div></div>

    <div class="goodsBox" style=" margin-top: 30px;">
        {% if not  published_apps and not publishing_apps and not failed_apps and not unpublished_apps and not keyword %}
            <div style="text-align: center">
                <p style="font-size: 20px;color: black"><b>简单几步即可拥有属于你的智能家电产品</b></p>
                <p style="color: #868586;">数百种APP界面随意挑选组合</p>
                <a href="{% url "product/add" %}">
                    <button type="button" class="set-create">创建</button>
                </a>
            </div>
        {% endif %}
        {% for app in published_apps %}
            <div class="goods-list">

                <dl>
                    <dt>
                        <a href="{% url 'product/main' %}?ID={{ app.app_id }}"><img src="{{ app.app_logo }}"
                                                                                    onerror="this.src='{% static "image/global/default.png" %}'"
                                                                                    title="产品图标"></a>
                    </dt>
                    <dd>
                        <div class="goods-title"><a
                                href="{% url 'product/main' %}?ID={{ app.app_id }}">{{ app.app_name }}</a>

                            <span class="label bg-white" style="font-size: 100%;">{% if app.app_model %}
                                {{ app.app_model }}{% endif %}</span>


                        </div>
                        <div class="product-info-div">
                            <div class="parcode">
                                <div class="arrow"></div>
                                <div id="code" style="padding-top: 25px;text-align: center;"></div>
                                <p style="text-align: center;color: #717375;">扫码发送到屏端快速验证</p>
                            </div>
                            <p class="product-info-p" >
                                分类：{{ app.app_device_type| category_detail}}
                            </p>
                            <p class="product-info-p">Key：<label >{{ app.app_appid| cover_str8 }}</label>
                                <a role="button" onmouseover="show_qrcode(this)" onmouseout="hide_qrcode(this)" data-id="{{ app.app_appid| cover_str8 }}" data-name="{{ app.app_name }}" data-date="{{ app.app_create_date| utc2local }}">
                                    <label style="margin-left: 46%;" class="fa fa-qrcode" ></label>
                                </a>
                                {% if app.app_group == 1 %}
                                    <label style="margin-left: 15px" class="fa fa-android"></label>{% else %}
                                    <label style="margin-left:15px;transform: rotate(-43deg);"
                                           class="fa fa-rss"></label>{% endif %}
                            </p>

                            <p class="product-info-p">更新于：{{ app.app_update_date| utc2local }}<label
                                    style=" margin-left: 8%;color: #1ab667">已发布</label></p>
                        </div>
                    </dd>
                    <dd class="ui-control">
                        <ul class="progress">
                            <li class="prog_a "><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/argue">功能</a>
                            </li>
                            <li class="prog_b"><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/device">协议</a>
                            </li>
                            <li class="prog_c"><a onclick="export_protocol({{ app.app_id }})" href="#">下载
                            <span><i class="fa fa-download"></i></span></a></li>
                            <li class="prog_d "><a onclick="block_mac(this)" href="#"
                                                   target="" data-id="{{ app.app_id }}" data-appid="{{ app.app_appid| cover_str8 }}">UI编辑</a></li>
                        </ul>
                    </dd>
                </dl>
            </div>
        {% endfor %}

        {% for app in publishing_apps %}
            <div class="goods-list">
                <dl>
                    <dt>
                        <a href="/product/main?ID={{ app.app_id }}"><img src="{{ app.app_logo }}"
                                                                         onerror="this.src='{% static "image/global/default.png" %}'"
                                                                         title="产品图标"></a>
                    </dt>
                    <dd>
                        <div class="goods-title"><a
                                href="{% url 'product/main' %}?ID={{ app.app_id }}">{{ app.app_name }}</a>
                            <span class="label bg-white" style="font-size: 100%;">{% if app.app_model %}
                                {{ app.app_model }}{% endif %}</span>
                        </div>
                        <div class="product-info-div">
                            <div class="parcode">
                                <div class="arrow"></div>
                                <div id="code" style="padding-top: 25px;text-align: center;"></div>
                                <p style="text-align: center;color: #000;">扫码发送到屏端快速验证</p>
                            </div>
                            <p class="product-info-p" >
                                分类：{{ app.app_device_type| category_detail}}
                            </p>
                            <p class="product-info-p">Key：<label>{{ app.app_appid| cover_str8 }}</label>
                                <a style="color: #428bca;" onmouseover="show_qrcode(this)" onmouseout="hide_qrcode(this)" data-id="{{ app.app_appid| cover_str8 }}" data-name="{{ app.app_name }}" data-date="{{ app.app_create_date| utc2local }}">
                                    <label style="margin-left: 13px;" class="fa fa-qrcode"></label>
                                </a>
                                {% if app.app_group == 1 %}
                                    <label style="margin-left: 15px" class="fa fa-android"></label>{% else %}
                                    <label style="margin-left:15px;transform: rotate(-43deg);"
                                           class="fa fa-rss"></label>{% endif %}
                            </p>
                            <p class="product-info-p">更新于：{{ app.app_update_date| utc2local }}<label
                                    style=" margin-left: 8%;color: #f39800">审核中</label></p>
                        </div>
                    </dd>
                    <dd class="ui-control">
                        <ul class="progress">
                            <li class="prog_a "><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/argue">功能</a>
                            </li>
                            <li class="prog_b"><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/device">协议</a>
                            </li>
                            <li class="prog_c"><a onclick="export_protocol({{ app.app_id }})" href="#">下载
                            <span><i class="fa fa-download"></i></span></a></li>
                            <li class="prog_d "><a onclick="block_mac(this)" href="#"
                                                   target="" data-id="{{ app.app_id }}" data-appid="{{ app.app_appid| cover_str8 }}">UI编辑</a></li>

                        </ul>
                    </dd>
                </dl>
            </div>
        {% endfor %}
        {% for app in unpublished_apps %}
            <div class="goods-list">
                <dl>
                    <dt>
                        <a href="{% url 'product/main' %}?ID={{ app.app_id }}">
                            <img src="{{ app.app_logo }}" onerror="this.src='{% static "image/global/default.png" %}'" title="产品图标">
                        </a>
                        <a style="display: none" class="del" href="javascript:" id="delProLink" data-id="{{ app.app_id }}"><i></i></a>
                    </dt>
                    <dd>
                        <div class="goods-title"><a
                                href="{% url 'product/main' %}?ID={{ app.app_id }}">{{ app.app_name }}</a>
                            <span class="label bg-white" style="font-size: 100%;">{% if app.app_model %}
                                {{ app.app_model }}{% endif %}</span>


                        </div>
                        <div class="product-info-div">
                            <div class="parcode">
                                <div class="arrow"></div>
                                <div id="code" style="padding-top: 25px;text-align: center;"></div>
                                <p style="text-align: center;color: #000;">扫码发送到屏端快速验证</p>
                            </div>
                            <p class="product-info-p">
                                分类：{{ app.app_device_type| category_detail}}
                            </p>
                            <p class="product-info-p">Key：<label>{{ app.app_appid| cover_str8 }}</label>
                                <a style="color: #428bca;" onmouseover="show_qrcode(this)" onmouseout="hide_qrcode(this)" data-id="{{ app.app_appid| cover_str8 }}" data-name="{{ app.app_name }}" data-date="{{ app.app_create_date| utc2local }}">
                                    <label style="margin-left: 13px;" class="fa fa-qrcode"></label>
                                </a>
                                {% if app.app_group == 1 %}
                                    <label style="margin-left: 18px" class="fa fa-android"></label>{% else %}
                                    <label style="margin-left:15px;transform: rotate(-43deg);"
                                           class="fa fa-rss"></label>{% endif %}

                            </p>

                            <p class="product-info-p">更新于：{{ app.app_update_date| utc2local }}<label
                                    style="margin-left: 8%;color: #333">未发布</label></p>
                        </div>
                    </dd>
                    <dd class="ui-control">
                        <ul class="progress">
                            <li class="prog_a "><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/argue">功能</a>
                            </li>
                            <li class="prog_b"><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/device">协议</a>
                            </li>
                            <li class="prog_c"><a onclick="export_protocol({{ app.app_id }})" href="#">下载
                            <span><i class="fa fa-download"></i></span></a>
                                </li>
                            <li class="prog_d "><a onclick="block_mac(this)" href="#"
                                                   target="" data-id="{{ app.app_id }}" data-appid="{{ app.app_appid| cover_str8 }}">UI编辑</a></li>

                        </ul>
                    </dd>
                </dl>
            </div>
        {% endfor %}
        {% for app in failed_apps %}
            <div class="goods-list" style="">

                <dl>
                    <dt>
                        <a href="{% url 'product/main' %}?ID={{ app.app_id }}"><img src="{{ app.app_logo }}"
                                                                                    onerror="this.src='{% static "image/global/default.png" %}'"
                                                                                    title="产品图标"></a>
                        <a style="display: none" class="del" href="javascript:" id="delProLink" data-id="{{ app.app_id }}"><i></i></a>
                    </dt>
                    <dd>
                        <div class="goods-title"><a
                                href="{% url 'product/main' %}?ID={{ app.app_id }}">{{ app.app_name }}</a>
                            <span class="label bg-white" style="font-size: 100%;">{% if app.app_model %}
                                {{ app.app_model }}{% endif %}</span>
                        </div>
                        <div class="product-info-div">
                            <div class="parcode">
                                <div class="arrow"></div>
                                <div id="code" style="padding-top: 25px;text-align: center;"></div>
                                <p style="text-align: center;color: #000;">扫码发送到屏端快速验证</p>
                            </div>
                            <p class="product-info-p" >
                                    分类：{{ app.app_device_type| category_detail}}
                            </p>
                            <p class="product-info-p">Key：<label>{{ app.app_appid| cover_str8 }}</label>
                                <a style="color: #428bca;" onmouseover="show_qrcode(this)" onmouseout="hide_qrcode(this)" data-id="{{ app.app_appid| cover_str8 }}" data-name="{{ app.app_name }}" data-date="{{ app.app_create_date| utc2local }}">
                                    <label style="margin-left: 13px;" class="fa fa-qrcode"></label>
                                </a>
                                {% if app.app_group == 1 %}
                                    <label style="margin-left: 15px" class="fa fa-android"></label>{% else %}
                                    <label style="margin-left:15px;transform: rotate(-43deg);"
                                           class="fa fa-rss"></label>{% endif %}
                            </p>

                            <p class="product-info-p">更新于：{{ app.app_update_date| utc2local }}<label
                                    style=" margin-left: 8%;color: #c91423">未通过</label></p>
                        </div>
                    </dd>
                    <dd class="ui-control">
                        <ul class="progress">
                            <li class="prog_a "><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/argue">功能</a>
                            </li>
                            <li class="prog_b"><a href="{% url 'product/main' %}?ID={{ app.app_id }}#/device">协议</a>
                            </li>
                            <li class="prog_c"><a onclick="export_protocol({{ app.app_id }})" href="#">下载
                                <span><i class="fa fa-download"></i></span></a>
                                </li>
                            <li class="prog_d "><a onclick="block_mac(this)" href="#"
                                                   target="" data-id="{{ app.app_id }}" data-appid="{{ app.app_appid| cover_str8}}">UI编辑</a></li>
                        </ul>
                    </dd>
                </dl>
            </div>
        {% endfor %}
    </div>
    <div id="ie-form"></div>

    <!-- 未发布的产品 -->
    <div class="markLayout"></div>
{% endblock %}

{% block script %}

    <script src="/static/js/product/bootbox.js"></script>
    <script src="/static/assets/js/jquery.jqGrid.min.js"></script>
    <script type="text/javascript" src="//cdn.staticfile.org/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
    <script type="text/javascript" src="{% static "js/product/page_product_list.js" %}"></script>
    <script src="/static/js/check-ie.js"></script>
        <script>
        //判断ie浏览器版本是否低于9
        if(lessIE9()){
            $.ajax({
                type: "get",
                url: '/error',
                data: "",
                success: function (msg) {
                    $("body").html(msg)
                },
                error: function () {
                }
            })
        }
        $('[data-rel=popover]').popover({container:'body'});
        var checkSubmitFlg = false;
        $(".goodsBox").height($(".goodsBox").height()+110);
        function utf16to8(str) {
            var out, i, len, c;
            out = "";
            len = str.length;
            for(i = 0; i < len; i++) {
            c = str.charCodeAt(i);
            if ((c >= 0x0001) && (c <= 0x007F)) {
                out += str.charAt(i);
            } else if (c > 0x07FF) {
                out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));
                out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));
                out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));
            } else {
                out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));
                out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));
            }
            }
            return out;
        }
        function show_qrcode(obj) {

            key = "key=" + $(obj).attr('data-id');
            parcode = $(obj).parent('p').parent('div').children('div');
            code = parcode.children('div#code');
            parcode.css('display','block');
            url = location.href.split(':')[0] + "://" + location.host+ "/product/wx_code?" + key;
            // url = "http://192.168.191.1:8000/product/wx_code?"+name+key+date;
            // url 包括中文字符编码转换
            url = utf16to8(url);
            //$(".markLayout").show();

            if(code.children().length<1) {
                code.qrcode({
                    width: 120, //宽度
                    height:120, //高度
                    text: url});
            }
            else {
                parcode.show();
            }
        }

        function hide_qrcode(obj) {
            parcode = $(obj).parent('p').parent('div').children('div');
            parcode.hide()
        }

        function select_progm(val) {
            $(".product_group").val(val);
            if(document.getElementsByName('select_group')[0].checked){
            $(".select-progm1").html("WiFi方案要求设备支持5V供电，两路串口，适用于集成灶，油烟机");
            }
            else{
                $(".select-progm1").html("Android屏方案要求设备支持5V供电，一路串口，适用于烤箱，冰箱");
            }
        }
        function block_mac(obj) {
            app_id = $(obj).attr('data-id');
            app_appid = $(obj).attr('data-appid');
            if(location.host.includes("open.53iq.com"))
            {
                $(obj).attr('href', "http://oven.53iq.com/static/html/move.html?id="+app_appid+".html");
            }
            else
            {
                $(obj).attr('href', "http://192.168.1.92:8000/static/html/move.html?id="+app_appid+".html");
            }
        }
        function export_protocol(id) {
            bootbox.confirm("确定导出控制协议参数吗?", function (result) {
                if (result) {
                    var form = document.createElement('form');
                    form.action = '#';
                    form.method = 'post';
                    form.style = "display: none";
                    var input = document.createElement("input");
                    input.name = "name";
                    input.type = "text";
                    input.value = "export";
                    var input1 = document.createElement("input");
                    input1.name = "app_id";
                    input1.type = "text";
                    input1.value = id;
                    form.appendChild(input);
                    form.appendChild(input1);
                    $("#ie-form").html(form);
                    form.submit();
                }
            });
        }
        function submit_product() {
            var form = $("form[name=formProduct]");

            var product_name = $("#product_name").val();
            if (product_name == '') {
                bootbox.alert("产品名称不能为空！");
                return;
            }
            if (!checkSubmitFlg) {
                checkSubmitFlg = true;
                console.log("不能重复提交");
                form.submit();
                //$("#loadingDiv").show();
            }
            else {
                return;
            }

        }
        function check_name() {
            if ($("#product_name").val() == '') {
                $('#productName').html("产品名称不能为空");
                $('#productName').css("display", "block");
                return '';
            }
            else {
                $('#productName').css("display", "none");

            }
        }
        function create_procuct(type) {
            $(".markLayout").show();
            if (type == '1') {
                $("#product_category_detail").val('1');
                $("#productType").html("油烟机");
                $("#show_logo").attr('src', "http://storage.56iq.net/group1/M00/1D/0C/CgoKQ1m3oSmAbhKvAAALicfeZeI743.png");
            }
            else if (type == '2') {
                $("#product_category_detail").val('2');
                $("#productType").html("集成灶");
                $("#show_logo").attr('src', "http://storage.56iq.net/group1/M00/1D/0C/CgoKQ1m3oYGANZPwAAAIvQGt7RM216.png");
            }
            else if (type == '11') {
                $("#product_category_detail").val('11');
                $("#productType").html("烤箱");
                $("#show_logo").attr('src', "http://storage.56iq.net/group1/M00/1D/0C/CgoKQ1m3oWqAbFICAAAKkW-6s_Q059.png");
            }
            $("#newHtmlBox").css('display', 'block');
            $(document).ready(function () {
                $(".markLayout").click(function (event) {
                    if (!$(this).hasClass("popBox") && !$(this).hasClass("tuya-btn tuya-btn-default mark-bottom-btn mark-children-bottom-btn")) {
                        new_close();
                    }
                    event.stopPropagation(); //阻止事件冒泡
                });
            });
        }
        function new_close() {

            $(".markLayout").hide();
            $("#newHtmlBox").css('display', 'none');
            $("#product_name").val('');
            $("#show_logo").attr('src', "");
            $('#productName').css("display", "none");
        }
        $(".left-dv4").click(function () {
            window.location.href = $(this).data('url')
        })
    </script>
{% endblock %}