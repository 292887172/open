 <style>
        html, body {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        overflow:auto;
      }
      .addButton{
        color:#fff;
        text-decoration:none;
        cursor:pointer;
      }
      .addButton:hover{
        color:#fff;
        text-decoration:none;
        cursor:pointer;
      }
        .ui-jqgrid tr.jqgrow td{
            overflow: visible;
            position: relative;
        }
        .ui-jqgrid-view>.ui-jqgrid-titlebar {
            background: #9EBEE4;
            width: 972px;
        }
        input[type=checkbox].ace.ace-switch.ace-switch-5:checked+.lbl::before {
            background-color: #337ab7;
            border-color: #337ab7;
        }
       .ui-jqgrid .ui-jqgrid-hbox {
            padding-right: 0px;
        }
        .ui-jqgrid-htable ui-common-table
        {
                width: 973px;
                border-left: 1px solid #e1e1e1;
        }
        .headerH1 {

            margin: 8px 8px;
            font-size: 14px;
            line-height: 1.5;
            color: #333;

        }
        .main-container:before {
            position: relative;
        }
        #show-no-data{
            position: relative;
            width: 200px;
            height: 200px;
            left: 42%;
            top: 40px;"
        }
     .help-button{
         background-color: #337ab7;
     }

     .warnCont {
        text-align: left;
    }
        .mt6 {
        margin-top: 27px;
    }
     .popBox h3 {
         background: none;
    }
    .btnBar{
        position: relative;
        background: none;
    }
     .ui-jqgrid .ui-jqgrid-bdiv{
         z-index: 0;
     }
    </style>
    <div class="main-container">
        <div style="background: #fff">
         <h1 class="headerH1"><span class="help-button" data-rel="popover" data-trigger="hover" data-placement="bottom">?</span> 产品功能填写规则</h1>
            <h1 class="headerH1">tips</h1>
            <h1 class="headerH1">1.id表示该产品功能序号，主要关系二进制 数据中改值所在帧结构中位置<br></h1>
            <h1 class="headerH1">2.长度是指该功能占用的位数，单位(Bit)。1Byte=8Bit<br></h1>
            <h1 class="headerH1">3.若是单功能帧，设备只需要传输设备功能的id紧接着传该功能的的值，具体传输数据占用长度跟该功能实际占用长度保持一致<br></h1>
            <h1 class="headerH1">4.全功能帧，设备只需要按功能序号组装数据帧即可，每个功能值占用长度很配置的该功能占用长度保持一致，若传输数据和id对应位置不匹配，导致功能解析错乱，状态不正确</h1>

            <img src="/static/image/product/Prompt.jpg">
         </div>
        <table id="grid-table">

        </table>
        <div id="show-no-data"></div>
        <div id="grid-pager"></div>
        <div id="ie-form"></div>

    </div>

    <div class="popBox" id="newHtmlBox" style="display: block;">
        <a href="javascript:;" onclick="new_close()" class="close">关闭</a>
        <h3 style="text-align: center">温馨提示</h3>
        <div class="cont mt20" style="margin-top: 20px;">
            <div class="warnCont">
                <p class="mt6">我们已经根据您的产品品类，为您推荐了标准参数，如果标准参数不能满足</p>
                <p class="mt6">您的需求，您可以申请自定义参数，但需要审核通过后才能发布</p>
            </div>
        </div>
        <p align="center"><input type="checkbox" id="check_continueShowTips" >不再提示</p>
        <div class="btnBar">
              <span>
                <a href="javascript:;" onclick="new_close()" class="btn-blue">知道了</a>
              </span>
        </div>
    </div>

    <!-- page specific plugin scripts -->
    <script src="/static/assets/js/jquery.jqGrid.min.js"></script>
    <script src="/static/assets/js/grid.locale-en.js"></script>
    <script src="/static/js/ejs.js"></script>
    <script src="/static/js/product/bootbox.js"></script>
   <script src="/static/js/product/jquery.cookie.js"></script>

		<!-- inline scripts related to this page -->
		<script type="text/javascript">
            var streamID=[];
            var flag = getCookie('cookie_prompt');
            if(flag){
                $("#newHtmlBox").css('display','none');
            }
            function new_close() {
                var check_prompt = $("#check_continueShowTips").is(':checked');
                // 关闭的情况下，选中不再提醒
                if (check_prompt){
                    setCookie('cookie_prompt', check_prompt);
                }
                $("#newHtmlBox").css('display','none');
                //$(".markLayout").hide();
            }
            function setCookie(name, value) {
                var Days = 30;
                var exp = new Date();
                exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);
                document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString()+";path=/";
            }
            //读取cookies
            function getCookie(name) {
                var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");

                if (arr = document.cookie.match(reg))

                    return unescape(arr[2]);
                else
                    return null;
            }
            //删除cookies
            function delCookie(name) {
                var exp = new Date();
                exp.setTime(exp.getTime() - 1);
                var cval = getCookie(name);
                if (cval != null)
                    document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString()+";path=/";
            }
			jQuery(function($) {
                $(".markLayout").show();
				jQuery("#grid-table").jqGrid({
					url:"#/argue",
					postData:{"name": "list"},
					datatype: "json",
					mtype:"POST",
					colNames:['id','功能标识', '长度', '功能名称','参数个数','是否可控', '是否启用','操作'],
					colModel:[
						{name:'id' , width:107,align:'center'},

						{name:'Stream_ID', width:143},
                        {name:'mxsLength',width:100,align:'center'},
						{name:'name', width:127,align:'center'},
						{name:'mxsNum', width:120,align:'center',
							formatter:function(cellvalue, options, rowObject){
									if(cellvalue=="" || cellvalue=="0"){
										return '<a href="#/argue" class="btn btn-white btn-xs" style="width:60px" >暂无</a>';
									}else{
                                        var id="canshu"+rowObject.id;
                                        group = new EJS({url: '/static/js/tmpl/table.ejs'}).render({"id":id, "cellvalue":cellvalue,"mxs":rowObject.mxs});
                                        return group;
									}
							}
						},
						{name:'isControl', width:108,align:'center',
							formatter:function(cellvalue, options, rowObject){
									if(cellvalue=="1"){
										return '是';
									}else{
										return '否';
									}
							}
						},
						{name:'state', width:131,align:'center',
							formatter:function(cellvalue, options, rowObject){
									if(cellvalue=="1"){

										return '<input id="state-temp'+rowObject.id+'" onclick="state(\''+rowObject.id+'\')" type="checkbox" class="ace ace-switch ace-switch-5" checked/><span ng-disabled="true" class="lbl middle"></span>';

									}else{
										return '<input id="state-temp'+rowObject.id+'"  onclick="state(\''+rowObject.id+'\')" type="checkbox" class="ace ace-switch ace-switch-5"/><span ng-disabled="true" class="lbl middle"></span>';
									}
							}
						},
						{name:'operation', width:150,align:'center',
							formatter:function(cellvalue, options, rowObject){
                            return "<a id='edit-info"+rowObject.id+"' style='color:#337ab7'  href='#/edit?id="+rowObject.id+"' >编辑</a> | <a href='#/argue' id='del-info"+rowObject.id+"' style='color:#337ab7' onclick='del(\""+rowObject.id+"\")'>删除</a> | <a href='#/argue' id='forbiden-info"+rowObject.id+"' style='color:#337ab7' onclick='ban(\""+rowObject.id+"\")'>禁用</a>";
						}
						}
					],
					//height:600,
					viewrecords : true,
					altRows: true,
					multiselect: false,
	        multiboxonly: true,
            caption: "<a onclick='add()' ng-hide='{[{ visible }]}' class='addButton'><i  class='ace-icon glyphicon glyphicon-plus'></i>定义产品功能</a>&nbsp;&nbsp;&nbsp;&nbsp;<a onclick='export_parameter()'  class='addButton'><i class='ace-icon fa fa-arrow-circle-o-down bigger-120'></i>导出控制协议</a>",

            gridComplete:function(){
                    $('.ui-jqgrid-sortable').eq(0).attr("align","center");
                    //$('.ui-jqgrid-sortable').eq(2).attr("align","center");
	        	 	$('.ui-jqgrid-sortable').eq(3).attr("align","center");
	        	 	$('.ui-jqgrid-sortable').eq(4).attr("align","center");
	        	 	$('.ui-jqgrid-sortable').eq(5).attr("align","center");
	        	 	$('.ui-jqgrid-sortable').eq(6).attr("align","center");
	        	 	$('.ui-jqgrid-sortable').eq(7).attr("align","center");
	        	 	$('.ui-jqgrid-sortable').eq(8).attr("align","center");
	        		$("#grid-table").jqGrid( 'setGridWidth', $(".rightMain").width() );

	        		$("#grid-table").jqGrid( 'setGridHeight', $("body").height()-300 );
	        		$(window).resize(function() {
							$("#grid-table").jqGrid( 'setGridWidth', $(".rightMain").width() );
                            $("#grid-table").jqGrid( 'setGridHeight', $("body").height() );

							});
	        },
            loadComplete:function (rows) {
                row = rows.rows;
                if(row.length==0){
                    $("#grid-table").jqGrid( 'setGridHeight', $("body").height()-500);
                    $("#show-no-data").text("该产品您还没有添加参数");
                }
                for ( var i=0;i<row.length ;i++){
                    id = row[i].id;
                    streamID.push(row[i].Stream_ID);
                    temp=document.getElementById("canshu"+id);
                    $(temp).parents('td').removeAttr('title');
                    if (rows.check_state >= 1) {
                    document.getElementById("state-temp"+id).setAttribute('disabled','true');
                    document.getElementById("edit-info"+id).removeAttribute('href');
                    document.getElementById("forbiden-info"+id).innerHTML="恢复";
                    document.getElementById("forbiden-info"+id).removeAttribute('onclick');
                    document.getElementById("forbiden-info"+id).removeAttribute('href');
                    document.getElementById("del-info"+id).removeAttribute('onclick');
                    document.getElementById("del-info"+id).removeAttribute('href');
                }
                }
                document.getElementById('grid-table').style.width='972px';
                tt = document.getElementsByClassName('ui-jqgrid-htable ui-common-table')[0];
                tt.style = 'border-left:1px solid #e1e1e1;width:973px';
            }
				});
			});
            function show_table(item) {
                $(item).nextAll('div').show();
                $(item).nextAll('div').children('table').show()
            }
            function hide_table(item) {
                $(item).nextAll('div').hide();
                $(item).nextAll('div').children('table').hide()
            }
			function state(id) {
			    post_data = {'name':'state','id':id};
			    $.ajax({
                   url:"#/argue",
                    type:"POST",
                    data:post_data,
                    async :false,
                    success: function (data) {
                       if(data=='change_success'){
                           alert("修改成功");
                       }
                       location.reload();
                        }
                });
            }
            function add(){
                location.href = "#/edit";
			}
			function export_parameter(){
                var rows = $("#grid-table").getRowData();
                if(rows == ''){
                    alert("暂无参数信息！");
                    return;
                }
                bootbox.confirm("确定导出控制协议参数吗?", function (result) {
                    if (result) {
                        var form = document.createElement('form');
                        form.action = '#/argue';
                        form.method = 'post';
                        form.style = "display: none";
                        var input = document.createElement("input");
                        input.name = "name";
                        input.type = "text";
                        input.value = "export";
                        form.appendChild(input);
                        $("#ie-form").html(form);
                        form.submit();
                    }
                })
			}
			function edit(id){
                //把id传给前台
				location.href="#/edit?id="+id;
			}
			function ban(id){
                content = document.getElementById("forbiden-info" + id).innerHTML;
                if ( content != "禁用") {
                    h = '#/edit?id=' + id;
                    document.getElementById("forbiden-info" + id).innerHTML="禁用";
                    document.getElementById("edit-info" + id).setAttribute("href",h);
                    document.getElementById("del-info" + id).setAttribute("href",'#/argue');
                    document.getElementById("del-info" + id).setAttribute("onclick",'del(\''+id+'\')');
                    document.getElementById("state-temp" + id).removeAttribute('disabled');
                }
                else {
                    document.getElementById("forbiden-info" + id).innerHTML="恢复";
                    document.getElementById("edit-info" + id).removeAttribute('href');
                    document.getElementById("del-info"+id).removeAttribute('href');
                    document.getElementById("del-info"+id).removeAttribute('onclick');
                    document.getElementById("state-temp" + id).setAttribute('disabled','true');


                }
			}
			function del(id){
			     post_data = {'name':'del', 'id':id};
                 $.ajax({
                        url:"#/argue",
                        type: "POST",
                        data: post_data,
                        success: function (data) {
                            console.log(data);
                            if(data=="del_success")
                            {
                                alert("删除成功");
                            }
                            location.reload();
                        },
                        error:function () {
                            alert("删除失败")
                        }
                    });
			}
		</script>